# Настройка интеграции с Wildberries API

## Получение API токена

1. **Зарегистрируйтесь** в личном кабинете продавца Wildberries
2. **Перейдите в настройки магазина** и создайте API-токен
3. **Выберите категорию токена** в зависимости от нужных функций:
   - **Контент** - для работы с товарами
   - **Статистика** - для получения аналитики
   - **Продвижение** - для управления рекламой
   - **Финансы** - для работы с финансами

## Настройка токена в приложении

По умолчанию приложение запускается в демонстрационном режиме (`wb.api.mock-mode=true`) и использует файл `classpath:mock/wb-products.json`.
Чтобы перейти на реальные данные, отключите заглушку и укажите токен.

### Способ 1: Переменная окружения (рекомендуется)
```bash
# Windows PowerShell
$env:WB_API_TOKEN="ваш_токен_здесь"

# Windows CMD
set WB_API_TOKEN=ваш_токен_здесь

# Linux/Mac
export WB_API_TOKEN="ваш_токен_здесь"
```

### Способ 2: Файл application.yml
```yaml
wb:
  api:
    token: "ваш_токен_здесь"
    mock-mode: false
```

## Проверка подключения

После настройки токена проверьте подключение:

```bash
# Проверка ping
curl "http://localhost:8080/api/v2/wb-api/ping"

# Получение информации о продавце
curl "http://localhost:8080/api/v2/wb-api/seller-info"
```

## Основные эндпоинты

### Получение товаров из WB API
```bash
# Все товары из WB API
curl "http://localhost:8080/api/v2/wb-api/goods"

# Товары с фильтрацией (реальные данные из WB)
curl "http://localhost:8080/api/v2/list/goods/filter?brand=TestBrand"

# Локальные данные (из базы данных)
curl "http://localhost:8080/api/v2/list/goods/filter?useLocalData=true"
```

### Синхронизация данных
```bash
# Синхронизация товаров из WB API в локальную базу
curl -X POST "http://localhost:8080/api/v2/wb-api/sync"
```

## Базовые URL для разных категорий API

- **Контент**: `https://content-api.wildberries.ru`
- **Статистика**: `https://statistics-api.wildberries.ru`
- **Продвижение**: `https://advert-api.wildberries.ru`
- **Финансы**: `https://finance-api.wildberries.ru`
- **Общее**: `https://common-api.wildberries.ru`

## Лимиты запросов

Wildberries API имеет лимиты на количество запросов:
- **1 минута**: 300 запросов
- **Интервал**: 200 миллисекунд
- **Всплеск**: 20 запросов

## Безопасность

⚠️ **ВАЖНО**: 
- Храните API токен в безопасности
- Не передавайте токен третьим лицам
- При подозрительной активности немедленно замените токен
- Используйте переменные окружения для хранения токена

## Поддержка

При возникновении проблем обращайтесь в техническую поддержку Wildberries через личный кабинет продавца, категория **API**.



